---
title: "[WebRTC ë°•ì‚´ë‚´ê¸°] ë¯¸ë””ì–´ ìŠ¤íŠ¸ë¦¼ê³¼ íŠ¸ë™ ì™„ë²½ ì´í•´"
description: "WebRTCì˜ MediaStreamê³¼ MediaStreamTrackì„ ê¹Šì´ ì´í•´í•˜ê³ , getUserMediaë¶€í„° íŠ¸ë™ ì œì–´, í’ˆì§ˆ ê´€ë¦¬ê¹Œì§€ ì‹¤ì „ ì˜ˆì œì™€ í•¨ê»˜ ì•Œì•„ë´…ë‹ˆë‹¤."
slug: "webrtc-deepdive-02"
date: "2025-10-13T12:44:00.000Z"
private: false
tags: ["WebRTC", "MediaStream", "MediaStreamTrack", "ì‹¤ì‹œê°„í†µì‹ "]
thumbnail: "https://raw.githubusercontent.com/chan9yu/blog9yu-content/refs/heads/main/posts/webrtc-deepdive-02/images/thumbnail.png"
series: WebRTC ë°•ì‚´ë‚´ê¸°!
seriesOrder: 2
---

# ì„œë¡ 

ì•ˆë…•í•˜ì„¸ìš”! ì§€ë‚œ ê¸€ì—ì„œëŠ” WebRTCì˜ ê¸°ë³¸ ê°œë…ê³¼ ì—°ê²° êµ¬ì¡°ì— ëŒ€í•´ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.
ì‹œê·¸ë„ë§, SDP, NAT ë¬¸ì œ í•´ê²°, ê·¸ë¦¬ê³  ë‹¤ì–‘í•œ ì•„í‚¤í…ì²˜ íŒ¨í„´ê¹Œì§€ **ì—°ê²°(Connection)** ìì²´ë¥¼ ì´í•´í•˜ëŠ” ë° ì§‘ì¤‘í–ˆëŠ”ë°ìš”

ê·¸ë ‡ë‹¤ë©´ ì—°ê²°ì´ ëœ í›„, ì‹¤ì œë¡œ **ì£¼ê³ ë°›ëŠ” ë°ì´í„°ëŠ” ë¬´ì—‡ì¼ê¹Œìš”?** ë°”ë¡œ **ë¯¸ë””ì–´ ìŠ¤íŠ¸ë¦¼(MediaStream)**ê³¼ **ë¯¸ë””ì–´ íŠ¸ë™(MediaStreamTrack)**ì…ë‹ˆë‹¤.

ì²˜ìŒ WebRTCë¡œ í™”ìƒ í†µí™”ë¥¼ êµ¬í˜„í•  ë•Œ `getUserMedia()`ë¥¼ ì‚¬ìš©í•´ ì¹´ë©”ë¼ë¥¼ ì¼œê³ , `addTrack()`ìœ¼ë¡œ íŠ¸ë™ì„ ì¶”ê°€í•˜ëŠ” ì½”ë“œë¥¼ ì ‘í•´ë³´ì…¨ì„ ê²ë‹ˆë‹¤.
í•˜ì§€ë§Œ **"ìŠ¤íŠ¸ë¦¼ê³¼ íŠ¸ë™ì€ ë¬´ì—‡ì´ ë‹¤ë¥¼ê¹Œ? ì–¸ì œ ì–´ë–¤ ê±¸ ì¨ì•¼ í• ê¹Œ?"**ë¼ëŠ” ì˜ë¬¸ì´ ìƒê¸°ê¸° ì‰½ìŠµë‹ˆë‹¤.

ì´ë²ˆ ê¸€ì—ì„œëŠ” `MediaStream`ê³¼ `MediaStreamTrack`ì˜ ê°œë…ì„ ì •ë¦¬í•˜ê³ , ì‹¤ì œ WebRTCì—ì„œ ì–´ë–»ê²Œ í™œìš©ë˜ëŠ”ì§€ ë‹¨ê³„ë³„ë¡œ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

![ì „ì²´ êµ¬ì¡° ê°œìš”](https://raw.githubusercontent.com/chan9yu/blog9yu-content/refs/heads/main/posts/webrtc-deepdive-02/images/image-01.png)

---

# Media Capture and Streams API

**[Media Capture and Streams API](https://developer.mozilla.org/ko/docs/Web/API/Media_Capture_and_Streams_API)**(ì¤„ì—¬ì„œ MediaStream API)ëŠ” WebRTCì™€ í•¨ê»˜ ì‚¬ìš©ë˜ëŠ” í•µì‹¬ APIë¡œ, **ì˜¤ë””ì˜¤ì™€ ë¹„ë””ì˜¤ ë°ì´í„°ë¥¼ ìº¡ì²˜í•˜ê³  ìŠ¤íŠ¸ë¦¬ë°**í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.

ìŠ¤íŠ¸ë¦¼ì€ **ìŒì„±, ì˜ìƒ, ë°ì´í„° ë“±ì˜ ì‘ì€ ì¡°ê°ë“¤ì´ í•˜ë‚˜ì˜ ì¤„ê¸°ë¥¼ ì´ë£¨ë©° ì „ì†¡ë˜ëŠ” ë°ì´í„° íë¦„**ì…ë‹ˆë‹¤.
ë§ˆì¹˜ ë¬¼ì´ íë¥´ë“¯ì´ ì—°ì†ì ìœ¼ë¡œ ë°ì´í„°ê°€ ì „ë‹¬ë©ë‹ˆë‹¤.

MediaStream APIê°€ ì œê³µí•˜ëŠ” ê²ƒì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤

1. **ë¯¸ë””ì–´ ìŠ¤íŠ¸ë¦¼ê³¼ íŠ¸ë™**: ì˜¤ë””ì˜¤/ë¹„ë””ì˜¤ë¥¼ ë‹´ëŠ” ì»¨í…Œì´ë„ˆì™€ ì‹¤ì œ ë°ì´í„°
2. **ì œì•½ ì¡°ê±´(Constraints)**: í•´ìƒë„, í”„ë ˆì„ë¥  ë“± ë°ì´í„° í˜•ì‹ ì œì–´
3. **ë¹„ë™ê¸° ì²˜ë¦¬**: ë¯¸ë””ì–´ ì ‘ê·¼ ì‹œ ì„±ê³µ/ì‹¤íŒ¨ ì½œë°±ê³¼ ì´ë²¤íŠ¸ ì œê³µ

---

# MediaStream

MediaStreamì€ **0ê°œ ì´ìƒì˜ MediaStreamTrackì„ ë‹´ëŠ” ì»¨í…Œì´ë„ˆ**ì…ë‹ˆë‹¤.
ì‰½ê²Œ ë§í•´ ì—¬ëŸ¬ íŠ¸ë™(ì˜¤ë””ì˜¤, ë¹„ë””ì˜¤)ì„ í•˜ë‚˜ë¡œ ë¬¶ì–´ ê´€ë¦¬í•˜ëŠ” ë°”êµ¬ë‹ˆë¼ê³  ìƒê°í•˜ì‹œë©´ ë  ê±° ê°™ë„¤ìš”

![MediaStreamê³¼ íŠ¸ë™ êµ¬ì¡°](https://raw.githubusercontent.com/chan9yu/blog9yu-content/refs/heads/main/posts/webrtc-deepdive-02/images/image-02.png)

ê° MediaStreamTrackì€ **í•˜ë‚˜ ì´ìƒì˜ ì±„ë„**ì„ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> ì˜ˆ) ìŠ¤í…Œë ˆì˜¤ ì˜¤ë””ì˜¤ëŠ” ì™¼ìª½/ì˜¤ë¥¸ìª½ 2ê°œ ì±„ë„

## ì…ë ¥ê³¼ ì¶œë ¥

MediaStreamì€ **í•˜ë‚˜ì˜ ì…ë ¥(source)**ê³¼ **í•˜ë‚˜ì˜ ì¶œë ¥(consumer)**ì„ ê°€ì§‘ë‹ˆë‹¤.

![ì…ë ¥ê³¼ ì¶œë ¥ íë¦„](https://raw.githubusercontent.com/chan9yu/blog9yu-content/refs/heads/main/posts/webrtc-deepdive-02/images/image-03.png)

**ì…ë ¥ ì†ŒìŠ¤**

Local MediaStream (`getUserMedia()` ë˜ëŠ” `getDisplayMedia()`ë¡œ ìƒì„±)

- ì¹´ë©”ë¼
- ë§ˆì´í¬
- í™”ë©´ ê³µìœ 

Non-local MediaStream (ì™¸ë¶€ì—ì„œ ìƒì„±)

- ë„¤íŠ¸ì›Œí¬(RTCPeerConnection)
- ë¯¸ë””ì–´ ìš”ì†Œ(`<video>`, `<audio>`)
- Web Audio API

**ì¶œë ¥ ëŒ€ìƒ**

- `<video>` ë˜ëŠ” `<audio>` ìš”ì†Œ
- RTCPeerConnection (ì›ê²© í”¼ì–´ë¡œ ì „ì†¡)
- MediaRecorder (ë…¹í™”)
- Web Audio API

## ì£¼ìš” ë©”ì„œë“œì™€ ì´ë²¤íŠ¸

MediaStreamì€ íŠ¸ë™ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ë‹¤ì–‘í•œ ë©”ì„œë“œë¥¼ ì œê³µí•©ë‹ˆë‹¤.

**íŠ¸ë™ ê°€ì ¸ì˜¤ê¸°**

ìŠ¤íŠ¸ë¦¼ì—ì„œ íŠ¹ì • ì¢…ë¥˜ì˜ íŠ¸ë™ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì´ëŠ” íŠ¸ë™ì„ ì œì–´í•˜ê±°ë‚˜ PeerConnectionì— ì¶”ê°€í•  ë•Œ í•„ìš”í•©ë‹ˆë‹¤.

```javascript
stream.getTracks(); // ëª¨ë“  íŠ¸ë™
stream.getAudioTracks(); // ì˜¤ë””ì˜¤ íŠ¸ë™ë§Œ
stream.getVideoTracks(); // ë¹„ë””ì˜¤ íŠ¸ë™ë§Œ
stream.getTrackById(id); // íŠ¹ì • ID íŠ¸ë™
```

**íŠ¸ë™ ì¶”ê°€/ì œê±° ë° ë³µì œ**

ì—¬ëŸ¬ ì†ŒìŠ¤ë¥¼ í•˜ë‚˜ì˜ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ê²°í•©í•˜ê±°ë‚˜, ë¶ˆí•„ìš”í•œ íŠ¸ë™ì„ ì œê±°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
`clone()`ì€ ê°™ì€ íŠ¸ë™ì„ ì°¸ì¡°í•˜ì§€ë§Œ ë‹¤ë¥¸ IDë¥¼ ê°€ì§„ ìƒˆ ìŠ¤íŠ¸ë¦¼ì„ ë§Œë“­ë‹ˆë‹¤.

```javascript
stream.addTrack(track); // íŠ¸ë™ ì¶”ê°€
stream.removeTrack(track); // íŠ¸ë™ ì œê±°
const clonedStream = stream.clone(); // ìƒˆ IDë¡œ ë³µì œ
```

**ì´ë²¤íŠ¸**

ìŠ¤íŠ¸ë¦¼ì˜ ìƒíƒœ ë³€í™”ë¥¼ ê°ì§€í•˜ì—¬ UIë¥¼ ì—…ë°ì´íŠ¸í•˜ê±°ë‚˜ ë¡œì§ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```javascript
stream.addEventListener("addtrack", (event) => {
	console.log("ìƒˆ íŠ¸ë™ ì¶”ê°€:", event.track);
});

stream.addEventListener("removetrack", (event) => {
	console.log("íŠ¸ë™ ì œê±°:", event.track);
});

stream.addEventListener("active", () => {
	console.log("ìŠ¤íŠ¸ë¦¼ í™œì„±í™”");
});

stream.addEventListener("inactive", () => {
	console.log("ìŠ¤íŠ¸ë¦¼ ë¹„í™œì„±í™”");
});
```

---

# MediaDevices

`MediaDevices`ëŠ” **ì¹´ë©”ë¼, ë§ˆì´í¬, í™”ë©´ ê³µìœ  ë“± í˜„ì¬ ì—°ê²°ëœ ë¯¸ë””ì–´ ì…ë ¥ ì¥ì¹˜ì— ì ‘ê·¼**í•˜ëŠ” ë°©ë²•ì„ ì œê³µí•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ì…ë‹ˆë‹¤.
ëª¨ë“  ë©”ì„œë“œëŠ” `navigator.mediaDevices`ë¥¼ í†µí•´ ì ‘ê·¼í•©ë‹ˆë‹¤.

```javascript
// navigator.mediaDevicesë¥¼ í†µí•´ ì ‘ê·¼
const devices = navigator.mediaDevices;
```

## getUserMedia() - ì¹´ë©”ë¼/ë§ˆì´í¬

ê°€ì¥ ê¸°ë³¸ì ì¸ ë¯¸ë””ì–´ ìº¡ì²˜ ë°©ë²•ì…ë‹ˆë‹¤.
ì‚¬ìš©ìì˜ ì¹´ë©”ë¼ì™€ ë§ˆì´í¬ì— ì ‘ê·¼í•˜ë ¤ë©´ ë°˜ë“œì‹œ ì‚¬ìš©ìì˜ ëª…ì‹œì ì¸ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.
ë¸Œë¼ìš°ì €ëŠ” ìë™ìœ¼ë¡œ ê¶Œí•œ ìš”ì²­ íŒì—…ì„ í‘œì‹œí•©ë‹ˆë‹¤.

```javascript
const stream = await navigator.mediaDevices.getUserMedia({
	video: true,
	audio: true
});

// ë¹„ë””ì˜¤ ìš”ì†Œì— ì—°ê²°
document.querySelector("#myVideo").srcObject = stream;
```

## getDisplayMedia() - í™”ë©´ ê³µìœ 

í™”ë©´ ê³µìœ  ê¸°ëŠ¥ì„ êµ¬í˜„í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.
ì‚¬ìš©ìëŠ” ì „ì²´ í™”ë©´, íŠ¹ì • ì°½, ë˜ëŠ” ë¸Œë¼ìš°ì € íƒ­ì„ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì‹œìŠ¤í…œ ì˜¤ë””ì˜¤ ìº¡ì²˜ëŠ” ë¸Œë¼ìš°ì €ì™€ ìš´ì˜ì²´ì œì— ë”°ë¼ ì§€ì› ì—¬ë¶€ê°€ ë‹¤ë¦…ë‹ˆë‹¤.

```javascript
const screenStream = await navigator.mediaDevices.getDisplayMedia({
	video: true,
	audio: true // ì‹œìŠ¤í…œ ì˜¤ë””ì˜¤
});
```

## enumerateDevices() - ì¥ì¹˜ ëª©ë¡

ì‚¬ìš©ìê°€ ì—¬ëŸ¬ ì¹´ë©”ë¼ë‚˜ ë§ˆì´í¬ë¥¼ ê°€ì§€ê³  ìˆì„ ë•Œ, íŠ¹ì • ì¥ì¹˜ë¥¼ ì„ íƒí•  ìˆ˜ ìˆë„ë¡ ëª©ë¡ì„ ì œê³µí•©ë‹ˆë‹¤.
ì´ëŠ” ì„¤ì • UIë¥¼ ë§Œë“¤ ë•Œ ìœ ìš©í•©ë‹ˆë‹¤.

```javascript
const devices = await navigator.mediaDevices.enumerateDevices();

devices.forEach((device) => {
	console.log(device.kind, device.label);
	// "videoinput" "FaceTime HD Camera"
	// "audioinput" "MacBook Pro Microphone"
});
```

---

# Constraints - ì œì•½ ì¡°ê±´

ConstraintsëŠ” **MediaStreamì˜ ë‚´ìš©ë¬¼ì„ ì œì–´**í•©ë‹ˆë‹¤.
ë¯¸ë””ì–´ íƒ€ì…, í•´ìƒë„, í”„ë ˆì„ë¥  ë“±ì„ ì„¸ë°€í•˜ê²Œ ì¡°ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë¸Œë¼ìš°ì €ëŠ” ì œì•½ ì¡°ê±´ì„ ìµœëŒ€í•œ ë§Œì¡±ì‹œí‚¤ë ¤ê³  ì‹œë„í•˜ì§€ë§Œ, ì •í™•íˆ ì¼ì¹˜í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
`ideal` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ë¸Œë¼ìš°ì €ê°€ ê°€ëŠ¥í•œ ë²”ìœ„ ë‚´ì—ì„œ ìµœì„ ì˜ ê°’ì„ ì„ íƒí•©ë‹ˆë‹¤.

## ê¸°ë³¸ ì‚¬ìš©ë²•

```javascript
const stream = await navigator.mediaDevices.getUserMedia({
	video: {
		width: { ideal: 1280 },
		height: { ideal: 720 },
		frameRate: { ideal: 30 }
	},
	audio: {
		echoCancellation: true,
		noiseSuppression: true
	}
});
```

## í‚¤ì›Œë“œ

ì œì•½ ì¡°ê±´ì„ ì„¤ì •í•  ë•Œ ì‚¬ìš©í•˜ëŠ” í‚¤ì›Œë“œë“¤ì€ ê°ê° ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ë™ì‘í•©ë‹ˆë‹¤.
`exact`ëŠ” ì—„ê²©í•˜ê²Œ, `ideal`ì€ ìœ ì—°í•˜ê²Œ ì ìš©ë©ë‹ˆë‹¤.

| í‚¤ì›Œë“œ  | ì˜ë¯¸         | ë™ì‘                 |
| ------- | ------------ | -------------------- |
| `exact` | ì •í™•íˆ ì´ ê°’ | ë¶ˆê°€ëŠ¥í•˜ë©´ ì—ëŸ¬ ë°œìƒ |
| `ideal` | ì´ìƒì ì¸ ê°’  | ìµœëŒ€í•œ ë§ì¶”ë ¤ ì‹œë„   |
| `min`   | ìµœì†Œê°’       | ì´ ê°’ ì´ìƒ           |
| `max`   | ìµœëŒ€ê°’       | ì´ ê°’ ì´í•˜           |

## ë¹„ë””ì˜¤/ì˜¤ë””ì˜¤ ì„¤ì • ì˜ˆì‹œ

ë¹„ë””ì˜¤ëŠ” ì£¼ë¡œ í™”ì§ˆê³¼ ì„±ëŠ¥ì˜ ê· í˜•ì„ ë§ì¶”ê¸° ìœ„í•´ í•´ìƒë„ì™€ í”„ë ˆì„ë¥ ì„ ì¡°ì •í•©ë‹ˆë‹¤.
`facingMode`ëŠ” ëª¨ë°”ì¼ ê¸°ê¸°ì—ì„œ ì „ë©´/í›„ë©´ ì¹´ë©”ë¼ë¥¼ ì„ íƒí•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.

ì˜¤ë””ì˜¤ëŠ” í†µí™” í’ˆì§ˆì„ ë†’ì´ê¸° ìœ„í•œ ë‹¤ì–‘í•œ ì²˜ë¦¬ ì˜µì…˜ì„ ì œê³µí•©ë‹ˆë‹¤.
íŠ¹íˆ `echoCancellation`ê³¼ `noiseSuppression`ì€ í™”ìƒ í†µí™” ì‹œ ë©”ì•„ë¦¬ì™€ ë°°ê²½ ì†ŒìŒì„ ì œê±°í•˜ì—¬ í†µí™” í’ˆì§ˆì„ í¬ê²Œ ê°œì„ í•©ë‹ˆë‹¤.

```javascript
// ë¹„ë””ì˜¤
video: {
  width: { min: 640, ideal: 1280, max: 1920 },
  height: { min: 480, ideal: 720, max: 1080 },
  frameRate: { max: 30 },
  facingMode: 'user' // ì „ë©´ ì¹´ë©”ë¼ (ëª¨ë°”ì¼)
}

// ì˜¤ë””ì˜¤
audio: {
  echoCancellation: true,       // ì—ì½” ì œê±°
  noiseSuppression: true,       // ë…¸ì´ì¦ˆ ì œê±°
  autoGainControl: true,        // ìë™ ë³¼ë¥¨ ì¡°ì ˆ
  sampleRate: { ideal: 48000 }  // ìƒ˜í”Œë§ ë ˆì´íŠ¸
}
```

---

# MediaStreamTrack

MediaStreamTrackì€ **ì‹¤ì œ ë¯¸ë””ì–´ ë°ì´í„°ë¥¼ ë‹´ëŠ” ê°œë³„ ë‹¨ìœ„**ì…ë‹ˆë‹¤.
í•˜ë‚˜ì˜ íŠ¸ë™ì€ í•˜ë‚˜ì˜ ë¯¸ë””ì–´ íƒ€ì…(ì˜¤ë””ì˜¤ ë˜ëŠ” ë¹„ë””ì˜¤)ë§Œ ë‹´ë‹¹í•©ë‹ˆë‹¤.

```javascript
track.kind; // "audio" ë˜ëŠ” "video"
```

- **ì˜¤ë””ì˜¤ íŠ¸ë™**: ë§ˆì´í¬, ì‹œìŠ¤í…œ ì˜¤ë””ì˜¤, Web Audio
- **ë¹„ë””ì˜¤ íŠ¸ë™**: ì¹´ë©”ë¼, í™”ë©´ ê³µìœ , Canvas

## íŠ¸ë™ì˜ ìƒíƒœ (readyState)

```javascript
track.readyState; // "live" ë˜ëŠ” "ended"
```

- **live**: íŠ¸ë™ì´ í™œì„± ìƒíƒœì´ë©° ë¯¸ë””ì–´ ë°ì´í„°ë¥¼ ì „ì†¡ ì¤‘
- **ended**: íŠ¸ë™ì´ ì¢…ë£Œë˜ì—ˆìœ¼ë©°, ë” ì´ìƒ ë¯¸ë””ì–´ ë°ì´í„°ë¥¼ ì œê³µí•˜ì§€ ì•ŠìŒ

> ğŸ’¡ í•œë²ˆ endedê°€ ë˜ë©´ ë‹¤ì‹œ liveë¡œ ëŒì•„ê°ˆ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!

íŠ¸ë™ì´ ì¢…ë£Œë˜ëŠ” ê²½ìš°ëŠ”

1. ì‚¬ìš©ìê°€ ê¶Œí•œ ì² íšŒ
2. ì¥ì¹˜ ì—°ê²° í•´ì œ (ì¹´ë©”ë¼ ì œê±° ë“±)
3. `track.stop()` í˜¸ì¶œ
4. ë¸Œë¼ìš°ì € íƒ­ ì¢…ë£Œ

ê°€ ìˆìŠµë‹ˆë‹¤.

## enabled vs muted

**enabled (ì œì–´ ê°€ëŠ¥)**

ê°œë°œìê°€ íŠ¸ë™ì˜ **ì¶œë ¥ì„ ì¼ì‹œì ìœ¼ë¡œ ë„ê±°ë‚˜ ì¼¤ ìˆ˜** ìˆìŠµë‹ˆë‹¤.

```javascript
videoTrack.enabled = false; // ê²€ì€ í™”ë©´ ì „ì†¡
videoTrack.enabled = true; // ì˜ìƒ ì¬ê°œ
```

âš ï¸ ì£¼ì˜ì‚¬í•­

- `enabled = false`ì—¬ë„ ì¹´ë©”ë¼ LEDëŠ” ê³„ì† ì¼œì ¸ ìˆìŒ
- ì›ê²© í”¼ì–´ì—ê²ŒëŠ” ë³€ê²½ì‚¬í•­ì´ ìë™ ì „ë‹¬ë˜ì§€ ì•ŠìŒ (ë³„ë„ ì‹œê·¸ë„ë§ í•„ìš”)

**muted (ì½ê¸° ì „ìš©)**

ë¸Œë¼ìš°ì €ë‚˜ ì‹œìŠ¤í…œì— ì˜í•´ ê²°ì •ë˜ëŠ” **ì½ê¸° ì „ìš©** ì†ì„±ì…ë‹ˆë‹¤.

```javascript
track.addEventListener("mute", () => {
	console.log("íŠ¸ë™ì´ ìŒì†Œê±°ë˜ì—ˆìŠµë‹ˆë‹¤");
});
```

muted ìƒíƒœê°€ ë˜ëŠ” ê²½ìš°ëŠ”

- ì¥ì¹˜ ì—°ê²° ë¬¸ì œ
- ì‹œìŠ¤í…œ ê¶Œí•œ ë³€ê²½
- ë¦¬ì†ŒìŠ¤ ë¶€ì¡±

ë“±ì´ ìˆìŠµë‹ˆë‹¤.

---

# PeerConnectionì— ë¯¸ë””ì–´ ì—°ê²°

![addTrack() ì „ì†¡ êµ¬ì¡°](https://raw.githubusercontent.com/chan9yu/blog9yu-content/refs/heads/main/posts/webrtc-deepdive-02/images/image-04.png)

ë¡œì»¬ì—ì„œ ìº¡ì²˜í•œ ë¯¸ë””ì–´ë¥¼ ì›ê²© í”¼ì–´ì—ê²Œ ì „ì†¡í•˜ë ¤ë©´ RTCPeerConnectionì— íŠ¸ë™ì„ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤.
**2025ë…„ í˜„ì¬ í‘œì¤€ ë°©ì‹**ì€ `addTrack()`ì…ë‹ˆë‹¤.

> âš ï¸ `addStream()`ì€ deprecatedë˜ì—ˆìœ¼ë¯€ë¡œ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”.

```javascript
const pc = new RTCPeerConnection(config);
const stream = await navigator.mediaDevices.getUserMedia({
	video: true,
	audio: true
});

// ê° íŠ¸ë™ì„ ê°œë³„ì ìœ¼ë¡œ ì¶”ê°€
stream.getTracks().forEach((track) => {
	pc.addTrack(track, stream);
});
```

## addTrackì˜ ì¥ì 

`addTrack()`ì´ ê¶Œì¥ë˜ëŠ” ì´ìœ ëŠ” íŠ¸ë™ ë‹¨ìœ„ë¡œ ì„¸ë°€í•œ ì œì–´ê°€ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
ì˜ˆë¥¼ ë“¤ì–´ í™”ìƒ í†µí™” ì¤‘ ë¹„ë””ì˜¤ë§Œ ë„ê±°ë‚˜, ì¹´ë©”ë¼ë¥¼ í™”ë©´ ê³µìœ ë¡œ êµì²´í•˜ëŠ” ë“±ì˜ ì‘ì—…ì„ ì¬í˜‘ìƒ ì—†ì´ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

1. **íŠ¸ë™ ë‹¨ìœ„ ì œì–´**: ê°œë³„ íŠ¸ë™ì„ ë…ë¦½ì ìœ¼ë¡œ ì¶”ê°€/ì œê±°/êµì²´ ê°€ëŠ¥
2. **í‘œì¤€ ì¤€ìˆ˜**: ìµœì‹  WebRTC ìŠ¤í™ì„ ë”°ë¦„
3. **ì¬í˜‘ìƒ ì œì–´**: íŠ¸ë™ ë³€ê²½ ì‹œ ìë™ìœ¼ë¡œ `negotiationneeded` ì´ë²¤íŠ¸ ë°œìƒ
4. **í¬ë¡œìŠ¤ ë¸Œë¼ìš°ì €**: ëª¨ë“  ëª¨ë˜ ë¸Œë¼ìš°ì € ì§€ì›

## ì›ê²© íŠ¸ë™ ìˆ˜ì‹ 

ì›ê²© í”¼ì–´ê°€ ë³´ë‚¸ íŠ¸ë™ì„ ìˆ˜ì‹ í•˜ë ¤ë©´ `track` ì´ë²¤íŠ¸ë¥¼ ë¦¬ìŠ¤ë‹í•´ì•¼ í•©ë‹ˆë‹¤.
ì´ë²¤íŠ¸ ê°ì²´ì—ëŠ” íŠ¸ë™ê³¼ í•¨ê»˜ ìŠ¤íŠ¸ë¦¼ ì •ë³´ê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

```javascript
pc.addEventListener("track", (event) => {
	const [remoteStream] = event.streams;
	document.querySelector("#remoteVideo").srcObject = remoteStream;
});
```

---

# íŠ¸ë™ ë™ì  ì œì–´

## replaceTrack()

![replaceTrack() ë™ì‘ íë¦„](https://raw.githubusercontent.com/chan9yu/blog9yu-content/refs/heads/main/posts/webrtc-deepdive-02/images/image-05.png)

`replaceTrack()`ì€ WebRTC ì—°ê²°ì„ ìœ ì§€í•œ ì±„ë¡œ ì†¡ì‹  ì¤‘ì¸ íŠ¸ë™ì„ ë‹¤ë¥¸ íŠ¸ë™ìœ¼ë¡œ êµì²´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
**ì¬í˜‘ìƒ(renegotiation) ê³¼ì •ì´ í•„ìš” ì—†ì–´ ë§¤ìš° ë¹ ë¥´ê²Œ ì „í™˜**ë©ë‹ˆë‹¤.

ëŒ€í‘œì ì¸ ì‚¬ìš© ì‚¬ë¡€ëŠ” í™”ìƒ íšŒì˜ ì¤‘ ì¹´ë©”ë¼ì™€ í™”ë©´ ê³µìœ ë¥¼ ì „í™˜í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.
ì‚¬ìš©ìê°€ í™”ë©´ ê³µìœ  ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ì¦‰ì‹œ ì „í™˜ë˜ë©°, ì—°ê²°ì´ ëŠê¸°ì§€ ì•ŠìŠµë‹ˆë‹¤.

```javascript
// ì¹´ë©”ë¼ì™€ í™”ë©´ ê³µìœ ë¥¼ ì „í™˜í•˜ëŠ” ì˜ˆì‹œ
async function toggleScreenShare(isSharing) {
	const videoSender = pc.getSenders().find((sender) => sender.track?.kind === "video");
	if (!videoSender) return;

	if (isSharing) {
		const screenStream = await navigator.mediaDevices.getDisplayMedia({ video: true });
		await videoSender.replaceTrack(screenStream.getVideoTracks()[0]);
	} else {
		const cameraStream = await navigator.mediaDevices.getUserMedia({ video: true });
		await videoSender.replaceTrack(cameraStream.getVideoTracks()[0]);
	}
}
```

## íŠ¸ë™ ì œê±°

íŠ¹ì • íŠ¸ë™ì„ ì™„ì „íˆ ì œê±°í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.
ì˜ˆë¥¼ ë“¤ì–´ í™”ìƒ íšŒì˜ì—ì„œ ì¹´ë©”ë¼ë¥¼ ì•„ì˜ˆ ë„ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> âš ï¸ ì œê±° í›„ì—ëŠ” ë°˜ë“œì‹œ `stop()`ì„ í˜¸ì¶œí•˜ì—¬ ë¦¬ì†ŒìŠ¤ë¥¼ ì •ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤.

```javascript
const sender = pc.getSenders().find((s) => s.track === myTrack);
if (sender) {
	pc.removeTrack(sender);
	myTrack.stop(); // íŠ¸ë™ ë¦¬ì†ŒìŠ¤ ì •ë¦¬
}
```

---

# ë¯¸ë””ì–´ ì²˜ë¦¬ íë¦„

![ë¯¸ë””ì–´ ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸](https://raw.githubusercontent.com/chan9yu/blog9yu-content/refs/heads/main/posts/webrtc-deepdive-02/images/image-06.png)

1. **ìº¡ì²˜**: `getUserMedia()`, `getDisplayMedia()`, `captureStream()`
2. **ì¸ì½”ë”©**: ë¸Œë¼ìš°ì €ê°€ ì½”ë±(VP8, H.264, Opus ë“±)ìœ¼ë¡œ ì••ì¶•
3. **ì „ì†¡**: RTP í”„ë¡œí† ì½œë¡œ ë„¤íŠ¸ì›Œí¬ ì „ì†¡
4. **ë””ì½”ë”©**: ìˆ˜ì‹  ì¸¡ì—ì„œ ì½”ë±ìœ¼ë¡œ ë³µì›
5. **ì¬ìƒ**: `<video>` ë˜ëŠ” `<audio>` ìš”ì†Œë¡œ ì¶œë ¥

## íŠ¸ë™ ë‹¨ìœ„ ì „ì†¡ì˜ ì¥ì 

1. **ë…ë¦½ì  ì œì–´**: ë¹„ë””ì˜¤ì™€ ì˜¤ë””ì˜¤ë¥¼ ê°ê° ì œì–´
2. **ë™ì  êµì²´**: í•„ìš” ì‹œ íŠ¹ì • íŠ¸ë™ë§Œ êµì²´
3. **ì„ íƒì  ì „ì†¡**: ëŒ€ì—­í­ì— ë”°ë¼ ì¼ë¶€ íŠ¸ë™ë§Œ ì „ì†¡
4. **ë©€í‹° ì†ŒìŠ¤**: ì—¬ëŸ¬ ì†ŒìŠ¤ë¥¼ ì¡°í•©í•´ ìƒˆë¡œìš´ ìŠ¤íŠ¸ë¦¼ ìƒì„±

---

# í’ˆì§ˆ ì œì–´

## ì „ì†¡ í’ˆì§ˆ ì¡°ì ˆ

ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­í­ì´ ì œí•œì ì´ê±°ë‚˜ ì €ì‚¬ì–‘ ê¸°ê¸°ë¥¼ ê³ ë ¤í•´ì•¼ í•  ë•Œ, ìˆ˜ë™ìœ¼ë¡œ ì „ì†¡ í’ˆì§ˆì„ ì¡°ì ˆí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
`setParameters()`ë¥¼ ì‚¬ìš©í•˜ë©´ ë¹„íŠ¸ë ˆì´íŠ¸, í•´ìƒë„, í”„ë ˆì„ë¥  ë“±ì„ ì œí•œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´ ëª¨ë°”ì¼ ë„¤íŠ¸ì›Œí¬ì—ì„œëŠ” ë¹„íŠ¸ë ˆì´íŠ¸ë¥¼ ë‚®ì¶”ê³ , í™”ë©´ì´ ì‘ì€ ê¸°ê¸°ì—ì„œëŠ” í•´ìƒë„ë¥¼ ì¤„ì—¬ ëŒ€ì—­í­ì„ ì ˆì•½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```javascript
const sender = pc.getSenders().find((s) => s.track?.kind === "video");
const params = sender.getParameters();

if (!params.encodings) {
	params.encodings = [{}];
}

// ìµœëŒ€ ë¹„íŠ¸ë ˆì´íŠ¸ 500kbpsë¡œ ì œí•œ
params.encodings[0].maxBitrate = 500000;

// í•´ìƒë„ë¥¼ ì›ë³¸ì˜ 50%ë¡œ ì¶•ì†Œ
params.encodings[0].scaleResolutionDownBy = 2;

await sender.setParameters(params);
```

## ë„¤íŠ¸ì›Œí¬ ì ì‘

ë¸Œë¼ìš°ì €ëŠ” ë„¤íŠ¸ì›Œí¬ ìƒí™©ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ê°ì§€í•˜ì—¬ ìë™ìœ¼ë¡œ í’ˆì§ˆì„ ì¡°ì •í•©ë‹ˆë‹¤.
íŒ¨í‚· ì†ì‹¤ì´ ì¦ê°€í•˜ë©´ ë¹„íŠ¸ë ˆì´íŠ¸ë¥¼ ë‚®ì¶”ê³ , ë„¤íŠ¸ì›Œí¬ê°€ ê°œì„ ë˜ë©´ ë‹¤ì‹œ í’ˆì§ˆì„ ë†’ì…ë‹ˆë‹¤.

`chrome://webrtc-internals/` ì—ì„œ ì‹¤ì‹œê°„ í†µê³„(ë¹„íŠ¸ë ˆì´íŠ¸, íŒ¨í‚· ì†ì‹¤ë¥ , RTT ë“±)ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> webrtc-internalsì€ í’ˆì§ˆ ë¬¸ì œë¥¼ ë””ë²„ê¹…í•  ë•Œ ë§¤ìš° ìœ ìš©í•©ë‹ˆë‹¤.

---

# í™•ì¥ ê°œë…

## ë©€í‹° ì†ŒìŠ¤ ê²°í•©

ë•Œë¡œëŠ” ì—¬ëŸ¬ ì†ŒìŠ¤ë¥¼ í•˜ë‚˜ì˜ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ê²°í•©í•´ì•¼ í•  ë•Œê°€ ìˆìŠµë‹ˆë‹¤.
ì˜ˆë¥¼ ë“¤ì–´ ì¹´ë©”ë¼ ì˜ìƒê³¼ í™”ë©´ ê³µìœ ë¥¼ ë™ì‹œì— ë³´ë‚´ê±°ë‚˜, ë§ˆì´í¬ ì˜¤ë””ì˜¤ì™€ ì‹œìŠ¤í…œ ì˜¤ë””ì˜¤ë¥¼ í•¨ê»˜ ì „ì†¡í•˜ê³  ì‹¶ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

`MediaStream` ìƒì„±ìì— íŠ¸ë™ ë°°ì—´ì„ ì „ë‹¬í•˜ë©´ ì—¬ëŸ¬ ì†ŒìŠ¤ì˜ íŠ¸ë™ì„ í•˜ë‚˜ì˜ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ë¬¶ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```javascript
const camera = await navigator.mediaDevices.getUserMedia({
	video: true,
	audio: true
});

const screen = await navigator.mediaDevices.getDisplayMedia({
	video: true
});

// ì¹´ë©”ë¼ ì˜¤ë””ì˜¤ + í™”ë©´ ë¹„ë””ì˜¤ ê²°í•©
const combined = new MediaStream([...camera.getAudioTracks(), ...screen.getVideoTracks()]);
```

## Canvas ë¹„ë””ì˜¤ í•©ì„±

Canvasë¥¼ ì‚¬ìš©í•˜ë©´ ì—¬ëŸ¬ ë¹„ë””ì˜¤ë¥¼ í•˜ë‚˜ì˜ í™”ë©´ì— í•©ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì´ëŠ” PIP(Picture-in-Picture) íš¨ê³¼ë‚˜ ì—¬ëŸ¬ ì°¸ê°€ìì˜ ì˜ìƒì„ ê²©ìë¡œ ë°°ì¹˜í•˜ëŠ” ë ˆì´ì•„ì›ƒì„ ë§Œë“¤ ë•Œ ìœ ìš©í•©ë‹ˆë‹¤.

`captureStream()`ì€ Canvasì˜ ë‚´ìš©ì„ ì‹¤ì‹œê°„ ë¹„ë””ì˜¤ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.
í”„ë ˆì„ë¥ (FPS)ì„ ì§€ì •í•˜ì—¬ ì„±ëŠ¥ì„ ì¡°ì ˆí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```javascript
const canvas = document.createElement("canvas");
canvas.width = 1280;
canvas.height = 720;
const ctx = canvas.getContext("2d");

function drawFrame() {
	ctx.drawImage(video1, 0, 0, 640, 720);
	ctx.drawImage(video2, 640, 0, 640, 720);
	requestAnimationFrame(drawFrame);
}
drawFrame();

const compositeStream = canvas.captureStream(30);
pc.addTrack(compositeStream.getVideoTracks()[0], compositeStream);
```

---

# ì‹¤ì „ íŒ

## ë¦¬ì†ŒìŠ¤ ì •ë¦¬ í•„ìˆ˜

ë¯¸ë””ì–´ ìŠ¤íŠ¸ë¦¼ì€ ì¹´ë©”ë¼ë‚˜ ë§ˆì´í¬ ê°™ì€ í•˜ë“œì›¨ì–´ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
ì‚¬ìš©ì´ ëë‚˜ë©´ ë°˜ë“œì‹œ `stop()`ì„ í˜¸ì¶œí•˜ì—¬ ì •ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤.
ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ì¹´ë©”ë¼ LEDê°€ ê³„ì† ì¼œì ¸ ìˆê±°ë‚˜ ë‹¤ë¥¸ ì•±ì—ì„œ ì¥ì¹˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ê²Œ ë©ë‹ˆë‹¤.

Reactì—ì„œëŠ” `useEffect`ì˜ cleanup í•¨ìˆ˜ì—ì„œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì…ë‹ˆë‹¤.

```javascript
function cleanup(stream) {
	stream.getTracks().forEach((track) => track.stop());
}

// React ì˜ˆì‹œ
useEffect(() => {
	return () => cleanup(localStream);
}, [localStream]);
```

## ê¶Œí•œ ì—ëŸ¬ ì²˜ë¦¬

`getUserMedia()`ëŠ” ë‹¤ì–‘í•œ ì´ìœ ë¡œ ì‹¤íŒ¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì‚¬ìš©ìê°€ ê¶Œí•œì„ ê±°ë¶€í•˜ê±°ë‚˜, ì¥ì¹˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ê±°ë‚˜, ì´ë¯¸ ë‹¤ë¥¸ ì•±ì—ì„œ ì‚¬ìš© ì¤‘ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ê° ìƒí™©ì— ë§ëŠ” ëª…í™•í•œ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ì œê³µí•˜ë©´ ì‚¬ìš©ì ê²½í—˜ì´ í¬ê²Œ ê°œì„ ë©ë‹ˆë‹¤.

```javascript
try {
	const stream = await navigator.mediaDevices.getUserMedia({ video: true });
} catch (error) {
	if (error instanceof DOMException) {
		if (error.name === "NotAllowedError") {
			alert("ì¹´ë©”ë¼ ê¶Œí•œì„ í—ˆìš©í•´ì£¼ì„¸ìš”");
		} else if (error.name === "NotFoundError") {
			alert("ì¹´ë©”ë¼ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤");
		}
	}
}
```

## HTTPS í•„ìˆ˜

`getUserMedia()`ëŠ” ë³´ì•ˆìƒì˜ ì´ìœ ë¡œ **HTTPS(ë³´ì•ˆ ì»¨í…ìŠ¤íŠ¸)**ì—ì„œë§Œ ì‘ë™í•©ë‹ˆë‹¤.
ì´ëŠ” ì‚¬ìš©ìì˜ í”„ë¼ì´ë²„ì‹œë¥¼ ë³´í˜¸í•˜ê¸° ìœ„í•œ ë¸Œë¼ìš°ì €ì˜ ì •ì±…ì…ë‹ˆë‹¤.

- **ê°œë°œ í™˜ê²½**: `localhost`ëŠ” ì˜ˆì™¸ì ìœ¼ë¡œ HTTP í—ˆìš©
- **í”„ë¡œë•ì…˜**: ë°˜ë“œì‹œ HTTPS ì‚¬ìš© (Let's Encrypt ë“±ìœ¼ë¡œ ë¬´ë£Œ SSL ì¸ì¦ì„œ ë°œê¸‰ ê°€ëŠ¥)

## ëª¨ë°”ì¼ ê³ ë ¤ì‚¬í•­

ëª¨ë°”ì¼ ë¸Œë¼ìš°ì €ëŠ” ë°ì´í„° ì ˆì•½ê³¼ ì‚¬ìš©ì ê²½í—˜ì„ ìœ„í•´ ìë™ì¬ìƒì„ ì œí•œí•©ë‹ˆë‹¤.
ë¹„ë””ì˜¤ë¥¼ ìë™ìœ¼ë¡œ ì¬ìƒí•˜ë ¤ë©´ ë°˜ë“œì‹œ ìŒì†Œê±° ìƒíƒœì—¬ì•¼ í•©ë‹ˆë‹¤.

````javascript
// ìë™ì¬ìƒì„ ìœ„í•´ ìŒì†Œê±° í•„ìš”
videoElement.muted = true;
await videoElement.play();
```]);
````

## ê¶Œí•œ ì—ëŸ¬ ì²˜ë¦¬

```javascript
try {
	const stream = await navigator.mediaDevices.getUserMedia({ video: true });
} catch (error) {
	if (error instanceof DOMException) {
		if (error.name === "NotAllowedError") {
			alert("ì¹´ë©”ë¼ ê¶Œí•œì„ í—ˆìš©í•´ì£¼ì„¸ìš”");
		} else if (error.name === "NotFoundError") {
			alert("ì¹´ë©”ë¼ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤");
		}
	}
}
```

## HTTPS í•„ìˆ˜

`getUserMedia()`ëŠ” **ë³´ì•ˆ ì»¨í…ìŠ¤íŠ¸(HTTPS)**ì—ì„œë§Œ ì‘ë™í•©ë‹ˆë‹¤.

- ê°œë°œ: `localhost`ëŠ” ì˜ˆì™¸
- í”„ë¡œë•ì…˜: ë°˜ë“œì‹œ HTTPS

## ëª¨ë°”ì¼ ê³ ë ¤ì‚¬í•­

```javascript
// ìë™ì¬ìƒì„ ìœ„í•´ ìŒì†Œê±° í•„ìš”
videoElement.muted = true;
await videoElement.play();
```

---

# ì •ë¦¬

ì´ë²ˆ ê¸€ì—ì„œëŠ” WebRTCì˜ **MediaStreamê³¼ MediaStreamTrack**ì— ëŒ€í•´ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.

**MediaStream**

- íŠ¸ë™ë“¤ì„ ë‹´ëŠ” ì»¨í…Œì´ë„ˆ
- ê³ ìœ í•œ `id`ë¡œ ì‹ë³„
- `getTracks()`, `addTrack()`, `removeTrack()` ì œê³µ

**MediaStreamTrack**

- ì‹¤ì œ ë¯¸ë””ì–´ ë°ì´í„°
- `kind`: "audio" ë˜ëŠ” "video"
- `readyState`: "live" ë˜ëŠ” "ended"
- `enabled`: ì¶œë ¥ ì œì–´
- `muted`: ì‹œìŠ¤í…œ ìƒíƒœ (ì½ê¸° ì „ìš©)

**ë¯¸ë””ì–´ ì¥ì¹˜ ì ‘ê·¼**

- `getUserMedia()`: ì¹´ë©”ë¼/ë§ˆì´í¬
- `getDisplayMedia()`: í™”ë©´ ê³µìœ 
- Constraintsë¡œ í’ˆì§ˆ ì„¤ì •

**íŠ¸ë™ ì œì–´**

- `addTrack()`: í‘œì¤€ ì „ì†¡ ë°©ì‹
- `replaceTrack()`: ì¬í˜‘ìƒ ì—†ì´ êµì²´
- í’ˆì§ˆ ì œì–´: `setParameters()`

ë‹¤ìŒ ê¸€ì—ì„œëŠ” **RTCPeerConnection APIì™€ ì´ë²¤íŠ¸ íë¦„**ì„ ë‹¤ë£¨ë©°, ì‹¤ì œ ì—°ê²° í›„ ë°ì´í„°ê°€ ì–´ë–»ê²Œ ì˜¤ê°€ëŠ”ì§€ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.
