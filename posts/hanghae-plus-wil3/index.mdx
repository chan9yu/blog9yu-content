---
title: "í•­í•´ í”ŒëŸ¬ìŠ¤ í”„ë¡ íŠ¸ì—”ë“œ 6ê¸° 3ì£¼ì°¨, Chapter 1-3. React, Beyond the Basics"
description: "ì´ë²ˆì—ëŠ” ë¦¬ì•¡íŠ¸ ë‚´ë¶€ì— ìˆëŠ” Hookì„ êµ¬í˜„í•˜ëŠ”ê²Œ ë©”ì¸ ê³¼ì œì…ë‹ˆë‹¤! useMemo, useCallback ê°™ì€ ê¸°ë³¸ Hookê³¼ ì§ì ‘ ìƒíƒœê´€ë¦¬ Hookì„ ë§Œë“¤ë©´ì„œ ë§ì´ ë°°ì›Œê°ˆ ìˆ˜ ìˆì„ ê±° ê°™ì•„ìš” ì´ë²ˆ ì£¼ì°¨ì—ì„œëŠ” ë¦¬ì•¡íŠ¸ì˜ í•µì‹¬ Hookë“¤ì„ ì§ì ‘ êµ¬í˜„í•´ë³´ë©´ì„œ ë‚´ë¶€ ë™ì‘ ì›ë¦¬..."
slug: "hanghae-plus-wil3"
date: "2025-07-28T08:56:22.311Z"
private: false
tags: ["WIL", "í•­í•´ í”ŒëŸ¬ìŠ¤ í”„ë¡ íŠ¸ì—”ë“œ 6ê¸°", "í•­í•´99"]
thumbnail: "https://raw.githubusercontent.com/chan9yu/blog9yu-content/refs/heads/main/posts/hanghae-plus-wil3/images/thumbnail.png"
series: "í•­í•´ í”ŒëŸ¬ìŠ¤ í”„ë¡ íŠ¸ì—”ë“œ 6ê¸°"
seriesOrder: 3
---

> **ì´ì „ ë¸”ë¡œê·¸ ë§í¬:** [https://velog.io/@chan9yu/hanghae-plus-wil3](https://velog.io/@chan9yu/hanghae-plus-wil3)

![](https://raw.githubusercontent.com/chan9yu/blog9yu-content/refs/heads/main/posts/hanghae-plus-wil3/images/hanghae-plus-wil3-01.png)

~~(ì œë°œ ì™¸ê·¼ ê·¸ë§Œ ì¢€ ë³´ë‚´ì£¼ì„¸ìš” ì œë°œìš”)~~

# 3ì£¼ì°¨ ì‹œì‘í•˜ê¸°

ë²Œì¨ **JS & React ë”¥ë‹¤ì´ë¸Œ**ì˜ ë§ˆì§€ë§‰ ì£¼ì°¨ì¸ 3ì£¼ì°¨ê°€ ì™”ìŠµë‹ˆë‹¤!

ì‹œê°„ì´ ì •ë§ ë¹ ë¥¸ ê²ƒ ê°™ì•„ìš”. ì‹œì‘í•œ ì§€ ì—Šê·¸ì œ ê°™ì€ë° ë²Œì¨ í•˜ë‚˜ì˜ ì½˜í…ì¸ ê°€ ëë‚˜ë²„ë¦¬ë‹¤ë‹ˆ.. ë§¤ì£¼ì°¨ ê·¸ë¬ì§€ë§Œ íšŒì‚¬ê°€ ë„ˆë¬´ ë°”ë¹ ì„œ ê³¼ì œí•  ì‹œê°„ì´ ì—†ëŠ” ê²Œ ë„ˆë¬´ ì•„ì‰¬ì›Œìš” ã… ã… 

ë„ëŒ€ì²´ ì™œ í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œìì¸ë° ì™¸ê·¼ì„ ê·¸ë ‡ê²Œ ê°€ëŠ”ì§€... ì™¸ê·¼ë§Œ ê°”ë‹¤ ì˜¤ë©´ ë„ˆë¬´ í˜ë“œë„¤ìš”

![](https://raw.githubusercontent.com/chan9yu/blog9yu-content/refs/heads/main/posts/hanghae-plus-wil3/images/hanghae-plus-wil3-02.png)

ë•ë¶„ì— ëŠ¦ì  ìì„œ ë°˜ì°¨ê¹Œì§€ ì“°ëŠ” ì°¸ì‚¬ê°€ ì¼ì–´ë‚˜ë²„ë ¸ìŠµë‹ˆë‹¤ ^^ ê·¸ë˜ë„ í‹ˆí‹ˆíˆ ì§¬ ë‚´ì„œ ê³¼ì œë¥¼ ì§„í–‰í•´ì„œ ë¬´ì‚¬íˆ ë§ˆë¬´ë¦¬í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤...

> ëˆì€ ë²Œì–´ì•¼ì§€... ğŸ˜©

# 3ì£¼ì°¨ ê³¼ì œ

**JS & React ë”¥ë‹¤ì´ë¸Œ**ì˜ ë§ˆì§€ë§‰ ê³¼ì œëŠ” ë¬´ì—‡ì¼ê¹Œìš”?

![](https://raw.githubusercontent.com/chan9yu/blog9yu-content/refs/heads/main/posts/hanghae-plus-wil3/images/hanghae-plus-wil3-03.png)

ì´ë²ˆì—ëŠ” ë¦¬ì•¡íŠ¸ ë‚´ë¶€ì— ìˆëŠ” **Hook**ì„ êµ¬í˜„í•˜ëŠ” ê²Œ ë©”ì¸ ê³¼ì œì…ë‹ˆë‹¤! **useMemo**, **useCallback** ê°™ì€ ê¸°ë³¸ Hookê³¼ ì§ì ‘ ìƒíƒœê´€ë¦¬ Hookì„ ë§Œë“¤ë©´ì„œ ë§ì´ ë°°ì›Œê°ˆ ìˆ˜ ìˆì„ ê²ƒ ê°™ì•„ìš”.

## ì–´ë–»ê²Œ êµ¬í˜„í–ˆì„ê¹Œ?

ì´ë²ˆ ì£¼ì°¨ì—ì„œëŠ” ë¦¬ì•¡íŠ¸ì˜ í•µì‹¬ Hookë“¤ì„ ì§ì ‘ êµ¬í˜„í•´ë³´ë©´ì„œ ë‚´ë¶€ ë™ì‘ ì›ë¦¬ë¥¼ ê¹Šì´ ì´í•´í•  ìˆ˜ ìˆì—ˆì–´ìš”.

### shallowEquals - ì–•ì€ ë¹„êµ

ë¨¼ì € Hookë“¤ì„ êµ¬í˜„í•˜ê¸° ì „ì—, ê°€ì¥ ê¸°ë³¸ì´ ë˜ëŠ” `shallowEquals` í•¨ìˆ˜ë¶€í„° êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

**ReactëŠ” ì™œ ì–•ì€ ë¹„êµë¥¼ ì‚¬ìš©í• ê¹Œìš”?**

ì‹¤ì œ Reactë¥¼ ì‚¬ìš©í•˜ë‹¤ ë³´ë©´ useStateë‚˜ useMemoì—ì„œ ê°ì²´ë‚˜ ë°°ì—´ì„ ì—…ë°ì´íŠ¸í•  ë•Œ ìŠ¤í”„ë ˆë“œ ì—°ì‚°ì(...)ë‚˜ Object.assign()ì„ ì‚¬ìš©í•˜ë¼ê³  ê¶Œì¥í•˜ê³  ìˆì–´ìš”. ê·¸ ì´ìœ ê°€ ë¬´ì—‡ì¼ê¹Œìš”?

**ê¹Šì€ ë¹„êµ vs ì–•ì€ ë¹„êµ (ì„±ëŠ¥ ì¸¡ë©´)**

ê¹Šì€ ë¹„êµëŠ” ê°ì²´ì˜ ëª¨ë“  ì¤‘ì²© ë ˆë²¨ì„ ì¬ê·€ì ìœ¼ë¡œ íƒìƒ‰í•´ì•¼ í•©ë‹ˆë‹¤.

```javascript
const obj1 = { a: 1, b: { c: 2, d: [3, 4, { e: 5 }] } };
const obj2 = { a: 1, b: { c: 2, d: [3, 4, { e: 5 }] } };
```

ì´ ë‘ ê°ì²´ê°€ ê°™ì€ì§€ ê¹Šì€ ë¹„êµë¡œ í™•ì¸í•˜ë ¤ë©´ ëª¨ë“  í‚¤ì™€ ê°’, ê·¸ë¦¬ê³  ê·¸ ì•ˆì˜ ë°°ì—´ê³¼ ê°ì²´ê¹Œì§€ ëê¹Œì§€ ì¬ê·€ì ìœ¼ë¡œ ë¹„êµí•´ì•¼ í•©ë‹ˆë‹¤.

- ê¹Šì€ ë¹„êµ: ì‹œê°„ë³µì¡ë„ O(n^k) (n: í”„ë¡œí¼í‹° ê°œìˆ˜, k: ì¤‘ì²© ë ˆë²¨)
- ì–•ì€ ë¹„êµ: ì‹œê°„ë³µì¡ë„ O(n) (n: ìµœìƒìœ„ í‚¤ ê°œìˆ˜)

ReactëŠ” ìƒíƒœ(state)ë‚˜ propsê°€ ë³€ê²½ë˜ì—ˆëŠ”ì§€ ë¹ ë¥´ê²Œ ê°ì§€í•´ì•¼ ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ì„ ë§‰ê³  ìµœì ì˜ ì„±ëŠ¥ì„ ìœ ì§€í•  ìˆ˜ ìˆì–´ìš”. ë§Œì•½ ê¹Šì€ ë¹„êµë¥¼ ì‚¬ìš©í•œë‹¤ë©´ ì»´í¬ë„ŒíŠ¸ê°€ ë§ì•„ì§ˆìˆ˜ë¡, ìƒíƒœê°€ ë³µì¡í•´ì§ˆìˆ˜ë¡ ì•± ì „ì²´ì˜ ì„±ëŠ¥ì´ í¬ê²Œ ì €í•˜ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ê·¸ë˜ì„œ ReactëŠ” ë¶ˆë³€ì„±(immutability) íŒ¨í„´ì„ ê¶Œì¥í•˜ê³ , ì–•ì€ ë¹„êµë§Œìœ¼ë¡œë„ ë³€ê²½ ì—¬ë¶€ë¥¼ ë¹ ë¥´ê²Œ íŒë‹¨í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ë˜ì–´ ìˆì–´ìš”.

**shallowEquals êµ¬í˜„ ê³¼ì •**

ì´ì œ ì–•ì€ ë¹„êµê°€ ì™œ í•„ìš”í•œì§€ ì•Œì•˜ìœ¼ë‹ˆ, ì‹¤ì œë¡œ `shallowEquals` í•¨ìˆ˜ë¥¼ êµ¬í˜„í•´ë´…ì‹œë‹¤.

```typescript
export const shallowEquals = (a: unknown, b: unknown) => {
	if (Object.is(a, b)) return true;
	if (typeof a !== "object" || typeof b !== "object" || a === null || b === null) return false;

	const isArrayA = Array.isArray(a);
	const isArrayB = Array.isArray(b);
	if (isArrayA !== isArrayB) return false;

	// ë‘˜ ë‹¤ ë°°ì—´ì´ë©´ ë°°ì—´ ë¹„êµ
	if (isArrayA && isArrayB) {
		if (a.length !== b.length) return false;
		for (let i = 0; i < a.length; i++) {
			if (!Object.is(a[i], b[i])) return false;
		}
		return true;
	}

	// ë‘˜ ë‹¤ ê°ì²´ë©´ ê°ì²´ ë¹„êµ
	const aObj = a as Record<string, unknown>;
	const bObj = b as Record<string, unknown>;
	const aKeys = Object.keys(aObj);
	const bKeys = Object.keys(bObj);

	if (aKeys.length !== bKeys.length) return false;
	for (const key of aKeys) {
		if (!(key in bObj)) return false;
		if (!Object.is(aObj[key], bObj[key])) return false;
	}
	return true;
};
```

í…ŒìŠ¤íŠ¸ëŠ” í†µê³¼í–ˆì§€ë§Œ, ì½”ë“œë¥¼ ë‹¤ì‹œ ë³´ë‹ˆ ëª‡ ê°€ì§€ ë¬¸ì œê°€ ë³´ì´ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤.

- í•˜ë‚˜ì˜ í•¨ìˆ˜ì— ë„ˆë¬´ ë§ì€ ë¡œì§ì´ ì§‘ì¤‘ë˜ì–´ ìˆìŒ
- ê°€ë…ì„±ì´ ë–¨ì–´ì ¸ì„œ ë‹¤ë¥¸ ì‚¬ëŒì´ ì´í•´í•˜ê¸° ì–´ë ¤ì›Œ ë³´ì„
- ê° ë¶€ë¶„ì˜ ì—­í• ì´ ëª…í™•í•˜ê²Œ ë¶„ë¦¬ë˜ì§€ ì•ŠìŒ

í—¬í¼ í•¨ìˆ˜ë¡œ ì—­í•  ë¶„ë¦¬ë¥¼ í•˜ì—¬ ë¦¬íŒ©í† ë§ì„ ì§„í–‰í•´ë³¼ ìˆ˜ ìˆì„ ê²ƒ ê°™ì•„ìš”.

```javascript
const isArray = (value: unknown) => Array.isArray(value);
const isObject = (value: unknown) => typeof value === 'object' && value !== null;
const compareArrays = (a: unknown[], b: unknown[]) =>
  a.length === b.length && a.every((item, index) => Object.is(item, b[index]));
const compareObjects = (a: object, b: object) => {
  const keysA = Object.keys(a);
  const keysB = Object.keys(b);
  return (
    keysA.length === keysB.length && keysA.every((key) => key in b && Object.is(a[key], b[key]))
  );
};

export const shallowEquals = (a: unknown, b: unknown) => {
  if (Object.is(a, b)) return true;
  if (!isObject(a) || !isObject(b)) return false;
  if (isArray(a) !== isArray(b)) return false;
  if (isArray(a) && isArray(b)) return compareArrays(a, b);
  return compareObjects(a, b);
};
```

í•¨ìˆ˜ ë¶„ë¦¬ë¥¼ í†µí•´ ê°€ë…ì„±ê³¼ ê°„ê²°í•¨ì´ ë†’ì•„ì¡Œê³ , í•¨ìˆ˜ì˜ ê²°í•©ë„ê°€ ëŠìŠ¨í•´ì¡Œì–´ìš”. ì§€ê¸ˆë„ ì¢‹ì§€ë§Œ ì—¬ê¸°ì„œ ì„ ì–¸ì ìœ¼ë¡œ í‘œí˜„í•  ìˆ˜ ìˆê²Œ ë¦¬íŒ©í† ë§ì„ ì§„í–‰í•´ë´¤ìŠµë‹ˆë‹¤.

```typescript
// ... í—¬í¼í•¨ìˆ˜ë“¤

type Condition<T> = (param: T) => boolean;
type Handler<T, R> = (param: T) => R;
type ConditionHandlerPair<T, R> = [condition: Condition<T>, handler: Handler<T, R>];

// dispatchWithCondition í•¨ìˆ˜ ì¶”ê°€êµ¬í˜„
export function dispatchWithCondition<T, R>(...args: [...ConditionHandlerPair<T, R>[], Handler<T, R>]) {
	const pairs = args.slice(0, -1) as ConditionHandlerPair<T, R>[];
	const defaultHandler = args[args.length - 1] as Handler<T, R>;

	return (param: T) => {
		for (const [condition, handler] of pairs) {
			if (condition(param)) {
				return handler(param);
			}
		}

		return defaultHandler(param);
	};
}

export const shallowEquals = (a: unknown, b: unknown) => {
	return dispatchWithCondition<[typeof a, typeof b], boolean>(
		// ë‘ ê°’ì´ ì •í™•íˆ ê°™ì€ì§€ í™•ì¸ (ì°¸ì¡°ê°€ ê°™ì€ ê²½ìš°)
		[([a, b]) => Object.is(a, b), () => true],
		// ë‘˜ ë‹¤ ê°ì²´ê°€ ì•„ë‹ˆë©´ false
		[([a, b]) => !isObject(a) || !isObject(b), () => false],
		// ì„œë¡œ ë‹¤ë¥¸ íƒ€ì…ì„ ë°›ì„ ê²½ìš° false
		[([a, b]) => isArray(a) !== isArray(b), () => false],
		// ë‘˜ ë‹¤ ë°°ì—´ì´ë©´ ë°°ì—´ ë¹„êµ
		[([a, b]) => isArray(a) && isArray(b), ([a, b]) => compareArrays(a as unknown[], b as unknown[])],
		// ë‘˜ ë‹¤ ê°ì²´ë©´ ê°ì²´ ë¹„êµ
		([a, b]) => compareObjects(a as object, b as object)
	)([a, b]);
};
```

ì´ë ‡ê²Œ ë¦¬íŒ©í† ë§í•œ ê²°ê³¼, ê° ì¡°ê±´ê³¼ ê·¸ì— ë”°ë¥¸ ì²˜ë¦¬ê°€ ëª…í™•í•˜ê²Œ ë¶„ë¦¬ë˜ì–´ ì½”ë“œì˜ ì˜ë„ë¥¼ í•œëˆˆì— íŒŒì•…í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆì–´ìš”. ë§ˆì¹˜ ì¡°ê±´ë¬¸ì„ ì½ë“¯ì´ ìì—°ìŠ¤ëŸ½ê²Œ ë¡œì§ì„ ì´í•´í•  ìˆ˜ ìˆëŠ” êµ¬ì¡°ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤!

> ğŸ¤” **ì™œ ì—¬ê¸°ì„œ ì›ì‹œê°’ ë¹„êµë¥¼ ===ê°€ ì•„ë‹Œ Object.isë¥¼ ì‚¬ìš©í–ˆì„ê¹Œìš”?**
>
> `Object.is`ëŠ” `===`ì™€ ê±°ì˜ ë™ì¼í•˜ê²Œ ë™ì‘í•˜ì§€ë§Œ, `NaN`ì„ ì„œë¡œ ê°™ë‹¤ê³  íŒë‹¨í•˜ê³  **+0**ê³¼ **-0**ì„ ë‹¤ë¥´ê²Œ ì·¨ê¸‰í•˜ëŠ” ë“± ì•½ê°„ì˜ ì°¨ì´ê°€ ìˆìŠµë‹ˆë‹¤.
> ëª¨ë“  ê°’ì˜ ì™„ì „í•œ ë™ì¹˜ì„±ì„ ì •í™•í•˜ê²Œ ë¹„êµí•´ì•¼ í•˜ëŠ” ìƒí™©ì—ì„œëŠ” ì´ëŸ° íŠ¹ìˆ˜í•œ ì¼€ì´ìŠ¤ê¹Œì§€ ì˜¬ë°”ë¥´ê²Œ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ `Object.is`ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë” ì•ˆì „í•˜ë‹¤ê³  ìƒê°í•´ì„œ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.

### useRef êµ¬í˜„

ê°€ì¥ ë¨¼ì € êµ¬í˜„í•œ `useRef`ëŠ” ìƒê°ë³´ë‹¤ ë‹¨ìˆœí–ˆìŠµë‹ˆë‹¤.

```typescript
export function useRef<T>(initialValue: T) {
	const [refObject] = useState<RefObject<T>>(() => ({ current: initialValue }));
	return refObject;
}
```

`useState`ë¥¼ ì´ìš©í•´ì„œ ì°¸ì¡°ë¥¼ ìœ ì§€í•˜ëŠ” ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ë°©ì‹ì¸ë°ìš”. ì—¬ê¸°ì„œ ì¤‘ìš”í•œ ê±´ **lazy initialization**ì„ ì‚¬ìš©í•œ ì ì…ë‹ˆë‹¤.

ì²˜ìŒì—ëŠ” ê·¸ëƒ¥ `useState({ current: initialValue })`ë¡œ êµ¬í˜„í–ˆì—ˆëŠ”ë°, ì´ë ‡ê²Œ í•˜ë©´ `initialValue`ê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ ê°ì²´ê°€ ìƒì„±ë  ìˆ˜ ìˆë‹¤ëŠ” ë¬¸ì œë¥¼ ë°œê²¬í–ˆì–´ìš”. ê·¸ë˜ì„œ í•¨ìˆ˜ í˜•íƒœë¡œ ì´ˆê¸°ê°’ì„ ì „ë‹¬í•´ì„œ í•œ ë²ˆë§Œ ì‹¤í–‰ë˜ë„ë¡ ê°œì„ í–ˆìŠµë‹ˆë‹¤.

### useMemoì™€ useCallback êµ¬í˜„

```typescript
export function useMemo<T>(factory: () => T, _deps: DependencyList, _equals = shallowEquals) {
	// useRefë¡œ ë©”ëª¨ì´ì œì´ì…˜ ìƒíƒœ ì €ì¥
	const memoRef = useRef<MemoRef<T> | null>(null);

	// ì˜ì¡´ì„± ë°°ì—´ì´ ì—†ê±°ë‚˜, ì´ì „ê³¼ ë‹¤ë¥´ë©´ ìƒˆë¡œ ê³„ì‚°
	if (!memoRef.current || !_equals(memoRef.current.deps, _deps)) {
		const value = factory();
		memoRef.current = { deps: _deps, value };
	}

	return memoRef.current.value;
}

export function useCallback<T extends AnyFunction>(factory: T, _deps: DependencyList) {
	return useMemo(() => factory, _deps);
}
```

`useMemo`ëŠ” `useRef`ë¥¼ í™œìš©í•´ì„œ ì´ì „ ê°’ê³¼ ì˜ì¡´ì„±ì„ ì €ì¥í•˜ê³ , `shallowEquals`ë¡œ ë¹„êµí•´ì„œ ë³€ê²½ëœ ê²½ìš°ì—ë§Œ ìƒˆë¡œ ê³„ì‚°í•˜ëŠ” ë°©ì‹ì´ì—ìš”. `useCallback`ì€ `useMemo`ë¥¼ ì¬í™œìš©í•´ì„œ í•¨ìˆ˜ë¥¼ ë©”ëª¨ì´ì œì´ì…˜í•˜ëŠ” êµ¬ì¡°ë¡œ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

### ê³ ê¸‰ Hookë“¤ êµ¬í˜„

**useShallowState - ì–•ì€ ë¹„êµ ê¸°ë°˜ ìƒíƒœ ê´€ë¦¬**

```typescript
export const useShallowState = <T>(initialValue: T): [T, Dispatch<SetStateAction<T>>] => {
	const [value, setValue] = useState<T>(initialValue);

	const setShallow = useCallback((newValue: SetStateAction<T>) => {
		setValue((prev) => {
			const nextValue = typeof newValue === "function" ? (newValue as (prevValue: T) => T)(prev) : newValue;
			return shallowEquals(prev, nextValue) ? prev : nextValue;
		});
	}, []);

	return [value, setShallow];
};
```

**useAutoCallback - ìë™ ì½œë°± ìµœì í™”**

```typescript
export const useAutoCallback = <T extends AnyFunction>(fn: T) => {
	const fnRef = useRef(fn);
	fnRef.current = fn; // ë§¤ ë Œë”ë§ë§ˆë‹¤ ìµœì‹  í•¨ìˆ˜ë¡œ ì—…ë°ì´íŠ¸

	const autoCallback = useCallback((...args: Parameters<T>) => {
		return fnRef.current(...args);
	}, []);

	return autoCallback;
};
```

### ìƒíƒœ ê´€ë¦¬ ì‹œìŠ¤í…œ êµ¬í˜„

**createStoreì™€ useStore**

```typescript
export const createStore = <S, A>(reducer: (state: S, action: A) => S, initialState: S) => {
	const { subscribe, notify } = createObserver();
	let state = initialState;

	const getState = () => state;
	const dispatch = (action: A) => {
		const newState = reducer(state, action);
		if (!Object.is(newState, state)) {
			state = newState;
			notify();
		}
	};

	return { getState, dispatch, subscribe };
};

export const useStore = <T, S = T>(store: Store<T>, selector = defaultSelector<T, S>) => {
	const shallowSelector = useShallowSelector(selector);
	const getSnapshot = () => shallowSelector(store.getState());
	return useSyncExternalStore(store.subscribe, getSnapshot);
};
```

`useSyncExternalStore`ë¥¼ ì‚¬ìš©í•´ì„œ ì™¸ë¶€ ìŠ¤í† ì–´ì™€ ë¦¬ì•¡íŠ¸ë¥¼ ì—°ê²°í•˜ëŠ” ë°©ì‹ì´ ì •ë§ ì¬ë¯¸ìˆì—ˆìŠµë‹ˆë‹¤!

## ê·¸ë˜ì„œ ê²°ê³¼ëŠ”..?

![](https://raw.githubusercontent.com/chan9yu/blog9yu-content/refs/heads/main/posts/hanghae-plus-wil3/images/hanghae-plus-wil3-04.png)

ì´ë²ˆì—ë„ ê¸°ë³¸ ê³¼ì œì™€ ì‹¬í™” ê³¼ì œê¹Œì§€ ëª¨ë‘ í†µê³¼í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤!

- âœ… **ê¸°ë³¸ê³¼ì œ**: equalities, hooks, HOC ëª¨ë‘ ì™„ë£Œ
- âœ… **ì‹¬í™”ê³¼ì œ**: ê³ ê¸‰ hooks, context ê°œì„  ëª¨ë‘ ì™„ë£Œ

<a href="https://chan9yu.github.io/front_6th_chapter1-3/" target="_blank">
	ë°°í¬ ë§í¬
</a>

# 3ì£¼ì°¨ KPT íšŒê³ 

## Keep

### React ë‚´ë¶€ ë™ì‘ ì›ë¦¬ ì´í•´

Hookë“¤ì„ ì§ì ‘ êµ¬í˜„í•´ë³´ë©´ì„œ Reactê°€ ì–´ë–»ê²Œ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê³  ë©”ëª¨ì´ì œì´ì…˜ì„ í•˜ëŠ”ì§€ ê¹Šì´ ì´í•´í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. íŠ¹íˆ `useMemo`ì™€ `useCallback`ì´ ë‹¨ìˆœíˆ ì„±ëŠ¥ ìµœì í™” ë„êµ¬ê°€ ì•„ë‹ˆë¼ Reactì˜ ë¦¬ë Œë”ë§ ë©”ì»¤ë‹ˆì¦˜ê³¼ ë°€ì ‘í•œ ê´€ë ¨ì´ ìˆë‹¤ëŠ” ê²ƒì„ ì²´ê°í•  ìˆ˜ ìˆì—ˆì–´ìš”.

### ì„ ì–¸ì  ë¦¬íŒ©í† ë§ ê²½í—˜

`dispatchWithCondition`ì„ í™œìš©í•œ ë¦¬íŒ©í† ë§ì„ í†µí•´ ì½”ë“œì˜ ê°€ë…ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì„ í¬ê²Œ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆì—ˆì–´ìš”. ê° ì¡°ê±´ê³¼ ì²˜ë¦¬ê°€ ëª…í™•í•˜ê²Œ ë¶„ë¦¬ë˜ì–´ ì½”ë“œë¥¼ ì½ëŠ” ê²ƒë§Œìœ¼ë¡œë„ ì˜ë„ë¥¼ íŒŒì•…í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

### ë©”ëª¨ì´ì œì´ì…˜ì˜ ë‹¨ì  íŒŒì•…

ë©”ëª¨ì´ì œì´ì…˜ì´ ì–‘ë‚ ì˜ ê²€ì´ë¼ëŠ” ê±¸ ê¹¨ë‹¬ì•˜ìŠµë‹ˆë‹¤. ì„±ëŠ¥ í–¥ìƒê³¼ ë©”ëª¨ë¦¬/ë¹„êµ ì˜¤ë²„í—¤ë“œ ì‚¬ì´ì˜ ê· í˜•ì„ ê³ ë ¤í•´ì•¼ í•œë‹¤ëŠ” ì ì„ ë°°ì› ì–´ìš”.

## Problem

### ì‹œê°„ ë¶€ì¡±ì˜ ì§€ì†ì ì¸ ì•„ì‰¬ì›€

ì—¬ì „íˆ íšŒì‚¬ ì—…ë¬´ì™€ ì™¸ê·¼ìœ¼ë¡œ ì¸í•´ ê³¼ì œì— ì¶©ë¶„í•œ ì‹œê°„ì„ íˆ¬ìí•˜ì§€ ëª»í•œ ì ì´ ì•„ì‰¬ì› ìŠµë‹ˆë‹¤. ë” ê¹Šì´ ìˆê²Œ ê³µë¶€í•˜ê³  ë‹¤ì–‘í•œ ìµœì í™” ê¸°ë²•ë“¤ì„ ì‹œë„í•´ë³´ê³  ì‹¶ì—ˆëŠ”ë° ì‹œê°„ì´ ë¶€ì¡±í–ˆì–´ìš”.

### ì •ë¦¬ ì‹œê°„ ë¶€ì¡±

êµ¬í˜„ì€ ì™„ë£Œí–ˆì§€ë§Œ í•™ìŠµí•œ ë‚´ìš©ì„ ì²´ê³„ì ìœ¼ë¡œ ì •ë¦¬í•˜ê³  ë¬¸ì„œí™”í•  ì‹œê°„ì´ ë¶€ì¡±í–ˆìŠµë‹ˆë‹¤. ë‹¤ë¥¸ íŒ€ì›ë“¤ì²˜ëŸ¼ ìƒì„¸í•œ í•™ìŠµ ê¸°ë¡ì„ ë‚¨ê¸°ì§€ ëª»í•œ ì ì´ ì•„ì‰¬ì› ì–´ìš”.

## Try

### React ê³ ê¸‰ íŒ¨í„´ í•™ìŠµ

- Fiber ì•„í‚¤í…ì²˜
- Concurrent ëª¨ë“œ
- Suspense

ê°™ì€ ê³ ê¸‰ ì£¼ì œë“¤ë„ ì‹œê°„ì„ ë‚´ì„œ ê³µë¶€í•´ë³´ê³  ì‹¶ì–´ìš”. ì´ë²ˆ ê³¼ì œë¥¼ í†µí•´ ê¸°ë³¸ê¸°ë¥¼ ë‹¤ì¡Œìœ¼ë‹ˆ ë” ì‹¬í™”ëœ ë‚´ìš©ë„ ì´í•´í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.

### ì²´ê³„ì ì¸ í•™ìŠµ ê¸°ë¡ ê´€ë¦¬

ë‹¤ìŒ ì±•í„°ë¶€í„°ëŠ” êµ¬í˜„ê³¼ ë™ì‹œì— í•™ìŠµ ë‚´ìš©ì„ ì²´ê³„ì ìœ¼ë¡œ ì •ë¦¬í•˜ëŠ” ìŠµê´€ì„ ê¸°ë¥´ê³  ì‹¶ì–´ìš”. GitHub Issuesë‚˜ ë¸”ë¡œê·¸ë¥¼ í†µí•´ ê¾¸ì¤€íˆ ê¸°ë¡ì„ ë‚¨ê²¨ë³´ë ¤ê³  í•©ë‹ˆë‹¤.

# ë§ˆë¬´ë¦¬

1, 2ì£¼ì°¨ì—ì„œ ë°°ìš´ Virtual DOMê³¼ ì»´í¬ë„ŒíŠ¸ ì‹œìŠ¤í…œì„ ë°”íƒ•ìœ¼ë¡œ 3ì£¼ì°¨ì—ì„œëŠ” Hookì˜ ë‚´ë¶€ ë™ì‘ê¹Œì§€ ì´í•´í•  ìˆ˜ ìˆì–´ì„œ ì •ë§ ì˜ë¯¸ ìˆëŠ” ì‹œê°„ì´ì—ˆì–´ìš”.

íŠ¹íˆ Reactê°€ ì™œ ì–•ì€ ë¹„êµë¥¼ ì‚¬ìš©í•˜ëŠ”ì§€, ë¶ˆë³€ì„±ì„ ê¶Œì¥í•˜ëŠ” ì´ìœ ê°€ ë¬´ì—‡ì¸ì§€ë¥¼ ì§ì ‘ êµ¬í˜„í•˜ë©´ì„œ ì²´ê°í•  ìˆ˜ ìˆì—ˆë˜ ì ì´ ê°€ì¥ í° ìˆ˜í™•ì´ì—ˆìŠµë‹ˆë‹¤.

ë²Œì¨ JS & React ë”¥ë‹¤ì´ë¸Œê°€ ëë‚¬ë‹¤ë‹ˆ ì•„ì‰½ì§€ë§Œ, ì´ì œ ë‹¤ìŒ ì±•í„°ì—ì„œ ë˜ ìƒˆë¡œìš´ ê±¸ ë°°ìš¸ ìƒê°í•˜ë‹ˆ ê¸°ëŒ€ë©ë‹ˆë‹¤!

---

![](https://raw.githubusercontent.com/chan9yu/blog9yu-content/refs/heads/main/posts/hanghae-plus-wil3/images/hanghae-plus-wil3-05.png)

(ë§ˆì§€ë§‰ì€ ì¤€ì¼ ì½”ì¹˜ë‹˜ì˜ ê·€ì—¬ìš´ ê³ ì–‘ì´ì‚¬ì§„ ğŸ±ğŸ±)
